% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/execute.R
\name{execute_r}
\alias{execute_r}
\title{Execute R code securely with tool support}
\usage{
execute_r(
  code,
  tools = list(),
  timeout = 30,
  sandbox = TRUE,
  limits = NULL,
  verbose = FALSE,
  validate = TRUE,
  sandbox_strict = FALSE,
  audit_log = NULL
)
}
\arguments{
\item{code}{Character string of R code to execute.}

\item{tools}{List of tools created with \code{\link[=securer_tool]{securer_tool()}}, or a named list
of functions (legacy format).}

\item{timeout}{Timeout in seconds for the execution, or \code{NULL} for no
timeout (default 30).}

\item{sandbox}{Logical, whether to enable OS-level sandboxing (default TRUE).}

\item{limits}{Optional named list of resource limits (see
\link{SecureSession} for details).}

\item{verbose}{Logical, whether to emit diagnostic messages via
\code{message()}.  Useful for debugging.  Users can suppress with
\code{suppressMessages()}.}

\item{validate}{Logical, whether to pre-validate the code for syntax
errors before sending it to the child process (default \code{TRUE}).}

\item{sandbox_strict}{Logical, whether to error if sandbox tools are
not available (default \code{FALSE}).  See \link{SecureSession} for details.}

\item{audit_log}{Optional path to a JSONL file for persistent audit
logging (default \code{NULL}, no file logging).}
}
\value{
The result of evaluating \code{code} in the secure session.
}
\description{
A convenience wrapper that creates a \link{SecureSession}, executes code, and
returns the result. The session is automatically closed when done.
}
\examples{
\donttest{
# Simple computation
execute_r("1 + 1", sandbox = FALSE)

# With tools
result <- execute_r(
  code = 'add(2, 3)',
  tools = list(
    securer_tool("add", "Add two numbers",
      fn = function(a, b) a + b,
      args = list(a = "numeric", b = "numeric"))
  ),
  sandbox = FALSE
)
}
\donttest{
# With resource limits (Unix only)
execute_r("1 + 1", limits = list(cpu = 10, memory = 256 * 1024 * 1024))
}

}
