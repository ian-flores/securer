% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/session-pool.R
\name{SecureSessionPool}
\alias{SecureSessionPool}
\title{SecureSessionPool}
\value{
An R6 object of class \code{SecureSessionPool}.
}
\description{
R6 class for a pool of pre-warmed \link{SecureSession} instances.

Creates multiple sessions at initialization time so that \verb{$execute()} calls
can run immediately on an idle session without waiting for process startup.
Sessions are returned to the pool after each execution completes (or errors).
}
\section{Thread Safety}{

\code{SecureSessionPool} is \strong{NOT} thread-safe. The acquire/release
mechanism uses no locking and assumes single-threaded access. If you need
to use pools from multiple processes (e.g., via \code{parallel::mclapply}
or \code{future}), each process should create its own pool instance.
Sharing a single pool across threads or forked processes will lead to
race conditions in session acquisition.
}

\examples{
\donttest{
pool <- SecureSessionPool$new(size = 2, sandbox = FALSE)
pool$execute("1 + 1")
pool$execute("2 + 2")
pool$close()
}

}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-SecureSessionPool-new}{\code{SecureSessionPool$new()}}
\item \href{#method-SecureSessionPool-execute}{\code{SecureSessionPool$execute()}}
\item \href{#method-SecureSessionPool-size}{\code{SecureSessionPool$size()}}
\item \href{#method-SecureSessionPool-available}{\code{SecureSessionPool$available()}}
\item \href{#method-SecureSessionPool-status}{\code{SecureSessionPool$status()}}
\item \href{#method-SecureSessionPool-format}{\code{SecureSessionPool$format()}}
\item \href{#method-SecureSessionPool-print}{\code{SecureSessionPool$print()}}
\item \href{#method-SecureSessionPool-close}{\code{SecureSessionPool$close()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SecureSessionPool-new"></a>}}
\if{latex}{\out{\hypertarget{method-SecureSessionPool-new}{}}}
\subsection{Method \code{new()}}{
Create a new SecureSessionPool
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SecureSessionPool$new(
  size = 4L,
  tools = list(),
  sandbox = TRUE,
  limits = NULL,
  verbose = FALSE,
  reset_between_uses = FALSE
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{size}}{Integer, number of sessions to pre-warm (default 4, minimum 1).}

\item{\code{tools}}{A list of \code{\link[=securer_tool]{securer_tool()}} objects passed to each session.}

\item{\code{sandbox}}{Logical, whether to enable OS-level sandboxing.}

\item{\code{limits}}{Optional named list of resource limits.}

\item{\code{verbose}}{Logical, whether to emit diagnostic messages.}

\item{\code{reset_between_uses}}{Logical, whether to restart each session
after an execution before returning it to the pool (default \code{FALSE}).
When \code{TRUE}, calls \code{session$restart()} after every \verb{$execute()} to
prevent state leaking between executions (e.g., variables, loaded
packages, options set by prior code).}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SecureSessionPool-execute"></a>}}
\if{latex}{\out{\hypertarget{method-SecureSessionPool-execute}{}}}
\subsection{Method \code{execute()}}{
Execute R code on an available pooled session
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SecureSessionPool$execute(code, timeout = NULL, acquire_timeout = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{code}}{Character string of R code to execute.}

\item{\code{timeout}}{Timeout in seconds, or \code{NULL} for no timeout.}

\item{\code{acquire_timeout}}{Optional timeout in seconds to wait for a
session to become available. If \code{NULL} (default), fails immediately
when all sessions are busy. If provided, retries acquisition with
a short sleep (0.1s) between retries until the timeout expires.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
The result of evaluating the code.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SecureSessionPool-size"></a>}}
\if{latex}{\out{\hypertarget{method-SecureSessionPool-size}{}}}
\subsection{Method \code{size()}}{
Number of sessions in the pool
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SecureSessionPool$size()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Integer
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SecureSessionPool-available"></a>}}
\if{latex}{\out{\hypertarget{method-SecureSessionPool-available}{}}}
\subsection{Method \code{available()}}{
Number of idle (non-busy) sessions
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SecureSessionPool$available()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Integer
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SecureSessionPool-status"></a>}}
\if{latex}{\out{\hypertarget{method-SecureSessionPool-status}{}}}
\subsection{Method \code{status()}}{
Summary of pool state
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SecureSessionPool$status()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
A named list with \code{total}, \code{busy}, \code{idle}, and \code{dead} counts.
\code{dead} indicates sessions that have crashed and need restart.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SecureSessionPool-format"></a>}}
\if{latex}{\out{\hypertarget{method-SecureSessionPool-format}{}}}
\subsection{Method \code{format()}}{
Format method for display
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SecureSessionPool$format(...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{...}}{Ignored.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A character string describing the pool.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SecureSessionPool-print"></a>}}
\if{latex}{\out{\hypertarget{method-SecureSessionPool-print}{}}}
\subsection{Method \code{print()}}{
Print method
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SecureSessionPool$print(...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{...}}{Ignored.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Invisible self.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-SecureSessionPool-close"></a>}}
\if{latex}{\out{\hypertarget{method-SecureSessionPool-close}{}}}
\subsection{Method \code{close()}}{
Close all sessions and shut down the pool
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{SecureSessionPool$close()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Invisible self
}
}
}
