[{"path":[]},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"what-this-is","dir":"","previous_headings":"","what":"What This Is","title":"securer — Development Guide","text":"R package secure LLM code execution. LLMs write R code calls registered tools functions. Execution pauses tool call, host fulfills , execution resumes. child R process runs inside OS sandbox.","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"architecture","dir":"","previous_headings":"","what":"Architecture","title":"securer — Development Guide","text":"Key files: - R/secure-session.R — Core R6 class, event loop, session lifecycle - R/child-runtime.R — Code string injected child (.securer_call_tool()) - R/ipc.R — UDS helpers (create, accept, read, write) - R/tool-registry.R — securer_tool(), validation, wrapper code generation - R/sandbox-macos.R — Seatbelt profile generation + wrapper script - R/sandbox-linux.R — Bubblewrap (bwrap) namespace isolation + wrapper script - R/sandbox-windows.R — Environment-variable-isolation Windows - R/rlimits.R — ulimit command generation validation - R/execute.R — execute_r() convenience function - R/validate.R — Code pre-validation (syntax + dangerous patterns) - R/audit-log.R — JSONL file-based audit logging - R/session-pool.R — SecureSessionPool R6 class - R/ellmer.R — ellmer tool integration (securer_as_ellmer_tool())","code":"SecureSession (R6) ├── callr::r_session — child R process ├── Unix domain socket — bidirectional IPC (tool calls + responses) ├── Tool registry — securer_tool() objects → child wrapper functions + type checking ├── Sandbox — macOS Seatbelt / Linux bwrap / Windows env isolation ├── Resource limits — ulimit-based CPU, memory, fsize, nproc, nofile, stack ├── Execution timeouts — deadline-based abort with session recovery ├── Verbose logging — optional structured message() output ├── Code pre-validation — syntax check + dangerous pattern warnings ├── Streaming output — capture cat()/print() via piped stdout/stderr ├── File-based audit log — JSONL event log for compliance/debugging └── ellmer integration — securer_as_ellmer_tool() for LLM chat  SecureSessionPool (R6) └── Pre-warmed pool of SecureSession instances for low-latency execution"},{"path":[]},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"unix-domain-socket-behavior","dir":"","previous_headings":"Critical Implementation Details","what":"Unix Domain Socket Behavior","title":"securer — Development Guide","text":"processx::conn_accept_unix_socket(server) return new connection. transitions server connection -place “connected_server” state. object used bidirectional data. SecureSession uses single ipc_conn field.","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"sandbox-wrapper-trick","dir":"","previous_headings":"Critical Implementation Details","what":"Sandbox Wrapper Trick","title":"securer — Development Guide","text":"callr::r_session_options(arch = \"/path//wrapper.sh\") — callr treats arch values containing / direct paths R binary. exploit inject sandbox-exec -f profile.sb R \"$@\" “R binary.”","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"socket-path-length","dir":"","previous_headings":"Critical Implementation Details","what":"Socket Path Length","title":"securer — Development Guide","text":"Unix domain sockets limited ~104 chars macOS. use /tmp directly instead tempdir() (can deeply nested R CMD check).","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"child-runtime","dir":"","previous_headings":"Critical Implementation Details","what":"Child Runtime","title":"securer — Development Guide","text":"child_runtime_code() returns CHARACTER STRING, functions. ’s eval(parse(text=...)) child’s global environment. Tool wrappers injected way UDS connects.","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"event-loop","dir":"","previous_headings":"Critical Implementation Details","what":"Event Loop","title":"securer — Development Guide","text":"run_with_tools() polls UDS tool-call JSON callr process completion loop 200ms poll intervals. Tool calls synchronous: child blocks UDS read, parent executes tool, writes result back.","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"execution-timeouts","dir":"","previous_headings":"Critical Implementation Details","what":"Execution Timeouts","title":"securer — Development Guide","text":"$execute(code, timeout = N) tracks elapsed time event loop. timeout, child process killed, UDS cleaned , session automatically restarted remains usable subsequent calls.","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"tool-argument-type-checking","dir":"","previous_headings":"Critical Implementation Details","what":"Tool Argument Type Checking","title":"securer — Development Guide","text":"Tool wrappers generated child process include runtime type validation args type annotations (e.g., args = list(x = \"numeric\")). Supported types: numeric, character, logical, integer, list, data.frame. Mismatches produce clear errors tool call dispatched.","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"verbose-logging","dir":"","previous_headings":"Critical Implementation Details","what":"Verbose Logging","title":"securer — Development Guide","text":"SecureSession$new(verbose = TRUE) logs lifecycle events via message(): session start/close, tool calls args timing, execution completion, errors, timeouts. Users can suppress suppressMessages().","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"concurrent-execution-guard","dir":"","previous_headings":"Critical Implementation Details","what":"Concurrent Execution Guard","title":"securer — Development Guide","text":"private executing flag prevents parallel $execute() calls session. flag reset via .exit() guarantee cleanup even errors.","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"code-pre-validation","dir":"","previous_headings":"Critical Implementation Details","what":"Code Pre-Validation","title":"securer — Development Guide","text":"$execute(code, validate = TRUE) parses code parse(text=) sending child, catching syntax errors immediately. Also warns dangerous patterns (system(), .Internal(), etc.) — advisory , sandbox handles actual restriction.","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"streaming-output","dir":"","previous_headings":"Critical Implementation Details","what":"Streaming Output","title":"securer — Development Guide","text":"$execute(code, output_handler = function(line) ...) pipes child stdout/stderr drains output event loop iteration. Output also available attr(result, \"output\") return value.","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"file-based-audit-log","dir":"","previous_headings":"Critical Implementation Details","what":"File-Based Audit Log","title":"securer — Development Guide","text":"SecureSession$new(audit_log = \"/path//log.jsonl\") writes structured JSONL entries session lifecycle, tool calls, execution events. session gets unique session_id correlation.","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"session-pooling","dir":"","previous_headings":"Critical Implementation Details","what":"Session Pooling","title":"securer — Development Guide","text":"SecureSessionPool$new(size = 4) pre-warms N sessions. $execute() acquires idle session, runs code, returns pool. Dead sessions auto-restarted acquire.","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"ellmer-integration","dir":"","previous_headings":"Critical Implementation Details","what":"ellmer Integration","title":"securer — Development Guide","text":"securer_as_ellmer_tool() wraps SecureSession ellmer::tool() definition. Errors returned ContentToolResult(error=...) don’t crash LLM chat. ellmer soft dependency (Suggests).","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"development-commands","dir":"","previous_headings":"","what":"Development Commands","title":"securer — Development Guide","text":"","code":"# Run tests Rscript -e \"devtools::test('.')\"  # Run R CMD check Rscript -e \"devtools::check('.')\"  # Regenerate docs (after roxygen changes) Rscript -e \"devtools::document('.')\"  # Load for interactive testing Rscript -e \"devtools::load_all('.')\""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"test-structure","dir":"","previous_headings":"","what":"Test Structure","title":"securer — Development Guide","text":"test-secure-session.R — Session lifecycle, timeouts, concurrent execution guard test-ipc.R — Tool call pause/resume via .securer_call_tool() directly test-tool-registry.R — securer_tool(), validation, wrappers, type checking, end--end test-sandbox.R — Sandbox restrictions (macOS/Linux/Windows), rlimits test-execute.R — execute_r() convenience API test-logging.R — Verbose logging output verification test-validate.R — Code pre-validation (syntax errors, dangerous patterns) test-audit-log.R — JSONL audit log events structure test-session-pool.R — Pool lifecycle, acquire/release, error recovery test-ellmer.R — ellmer tool definition, execution, error handling","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"platform-notes","dir":"","previous_headings":"","what":"Platform Notes","title":"securer — Development Guide","text":"macOS: Full sandbox via Seatbelt. Requires /usr/bin/sandbox-exec. Linux: Full sandbox via bubblewrap (bwrap). Requires bwrap PATH. Windows: Environment isolation (clean HOME/TMPDIR, empty R_LIBS_USER). filesystem/network restrictions. Sandbox tests use skip_on_os() skip_if_not() gate platform-specific tests.","code":""},{"path":"https://ian-flores.github.io/securer/CLAUDE.html","id":"known-limitations","dir":"","previous_headings":"","what":"Known Limitations","title":"securer — Development Guide","text":"Windows sandbox provides environment isolation — filesystem network restrictions without admin privileges Single concurrent session per SecureSession instance — concurrent $execute() calls detected rejected error","code":""},{"path":"https://ian-flores.github.io/securer/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2026 Ian Flores Siaca Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Using securer with ellmer","text":"ellmer R package chatting LLMs. securer integrates ellmer’s tool-use system LLM can execute R code sandboxed child process. LLM writes code, securer runs safely, result flows back conversation. securer_as_ellmer_tool() bridge two packages. wraps SecureSession ellmer tool definition register chat object.","code":""},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"quick-start","dir":"Articles","previous_headings":"","what":"Quick start","title":"Using securer with ellmer","text":"’s . LLM receives tool called execute_r_code accepts code string. model decides use , securer runs code sandboxed child process returns result. sandbox blocks filesystem writes network access — LLM can compute exfiltrate.","code":"library(securer) library(ellmer)  chat <- chat_openai() chat$register_tool(securer_as_ellmer_tool()) chat$chat(\"What is the sum of the first 100 prime numbers?\")"},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"how-it-works","dir":"Articles","previous_headings":"","what":"How it works","title":"Using securer with ellmer","text":"call securer_as_ellmer_tool(), securer: Creates SecureSession (uses one provide) Returns ellmer ToolDef object single code argument LLM sees tool’s description can choose call LLM invokes tool: Errors child (syntax errors, runtime errors, timeouts) caught returned ContentToolResult(error = ...). tells LLM something went wrong without crashing chat loop — model can try explain error.","code":"LLM generates: execute_r_code(code = \"mean(1:100)\")     |     v ellmer calls securer's executor function     |     v securer sends code to sandboxed child process     |     v Child evaluates code, returns result     |     v securer formats result as a string     |     v ellmer passes result back to LLM     |     v LLM incorporates result into its response"},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"adding-securer-tools","dir":"Articles","previous_headings":"","what":"Adding securer tools","title":"Using securer with ellmer","text":"real power comes giving LLM access functions. Define securer tools pass : LLM’s code runs sandboxed, query_db() list_tables() execute host full database access. sandbox ensures LLM can interact data tools define.","code":"tools <- list(   securer_tool(\"query_db\", \"Query a database table by name\",     fn = function(table, limit) {       con <- DBI::dbConnect(RSQLite::SQLite(), \"data.db\")       on.exit(DBI::dbDisconnect(con))       DBI::dbGetQuery(con, sprintf(\"SELECT * FROM %s LIMIT %d\", table, limit))     },     args = list(table = \"character\", limit = \"numeric\")),    securer_tool(\"list_tables\", \"List available database tables\",     fn = function() {       con <- DBI::dbConnect(RSQLite::SQLite(), \"data.db\")       on.exit(DBI::dbDisconnect(con))       DBI::dbListTables(con)     },     args = list()) )  chat <- chat_openai() chat$register_tool(securer_as_ellmer_tool(tools = tools)) chat$chat(\"What tables are available? Show me the first 5 rows of each.\")"},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"configuring-the-session","dir":"Articles","previous_headings":"","what":"Configuring the session","title":"Using securer with ellmer","text":"securer_as_ellmer_tool() accepts configuration SecureSession:","code":"tool_def <- securer_as_ellmer_tool(   tools = tools,   sandbox = TRUE,       # OS-level sandbox (default)   limits = list(        # Resource limits     cpu = 30,     memory = 512 * 1024 * 1024   ),   timeout = 15          # Per-execution timeout in seconds (default: 30) )"},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"sandbox","dir":"Articles","previous_headings":"Configuring the session","what":"Sandbox","title":"Using securer with ellmer","text":"sandbox = TRUE (default), child process runs inside OS-level sandbox: macOS: Seatbelt blocks network access filesystem writes outside /tmp Linux: bubblewrap provides full namespace isolation Windows: Environment-variable isolation (warning issued) Set sandbox = FALSE trust LLM’s code running environment sandboxing isn’t available.","code":""},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"resource-limits","dir":"Articles","previous_headings":"Configuring the session","what":"Resource limits","title":"Using securer with ellmer","text":"limits argument applies ulimit-based caps child process. prevents LLM writing code consumes available CPU memory:","code":""},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"timeout","dir":"Articles","previous_headings":"Configuring the session","what":"Timeout","title":"Using securer with ellmer","text":"timeout parameter (default 30 seconds) sets wall-clock deadline code execution. LLM writes infinite loop, securer kills child process returns error ellmer. session automatically recovers reusable subsequent tool calls.","code":""},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"using-a-pre-existing-session","dir":"Articles","previous_headings":"","what":"Using a pre-existing session","title":"Using securer with ellmer","text":"need control session lifecycle, create one pass : provide session, securer create close one internally. useful want: Verbose logging see tool calls timing Audit logging (audit_log = \"path.jsonl\") compliance State persistence across multiple chat turns Session reuse across multiple chat objects","code":"session <- SecureSession$new(   tools = tools,   sandbox = TRUE,   verbose = TRUE  # Log tool calls and execution timing )  chat <- chat_openai() chat$register_tool(securer_as_ellmer_tool(session = session))  chat$chat(\"Analyze the sales table and compute monthly totals.\") chat$chat(\"Now plot the trend.\")  # Same session, state persists  # You own the session --- close it when done session$close()"},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"result-formatting","dir":"Articles","previous_headings":"","what":"Result formatting","title":"Using securer with ellmer","text":"securer converts R values strings returning LLM: Truncation prevents large results consuming LLM’s context window.","code":""},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"error-handling","dir":"Articles","previous_headings":"","what":"Error handling","title":"Using securer with ellmer","text":"Errors surfaced LLM tool errors, R exceptions. means chat doesn’t crash — LLM sees error message can react: Error scenarios handled: Syntax errors LLM’s code Runtime errors (e.g., stop(), missing variables) Timeout (code runs long) Dead session (child process crashed) Type mismatches tool arguments (e.g., passing string numeric expected) cases, LLM receives descriptive error message can decide proceed.","code":"chat <- chat_openai() chat$register_tool(securer_as_ellmer_tool(sandbox = FALSE))  # The LLM might generate code with a bug. securer catches the error # and returns it as a tool result. The LLM sees the error message # and can fix its code and try again. chat$chat(\"Divide 1 by 0 and tell me what happens in R\")"},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"example-data-analysis-assistant","dir":"Articles","previous_headings":"","what":"Example: data analysis assistant","title":"Using securer with ellmer","text":"complete example combining securer, ellmer, custom tools: chat$chat() call may trigger multiple rounds code execution. LLM writes code, sees result, can write code — within sandboxed session persistent state.","code":"library(securer) library(ellmer)  # Define tools the LLM can use tools <- list(   securer_tool(\"load_csv\", \"Load a CSV file and return as data frame\",     fn = function(path) {       if (!file.exists(path)) stop(\"File not found: \", path)       read.csv(path)     },     args = list(path = \"character\")),    securer_tool(\"save_plot\", \"Save the current plot to a PNG file\",     fn = function(filename) {       dev.copy(png, filename, width = 800, height = 600)       dev.off()       paste(\"Plot saved to\", filename)     },     args = list(filename = \"character\")) )  # Create a sandboxed execution environment chat <- chat_openai(   system_prompt = paste(     \"You are a data analysis assistant.\",     \"You have access to an R execution environment via the execute_r_code tool.\",     \"Use it to load data, compute statistics, and create visualizations.\",     \"Available tools inside R: load_csv(path), save_plot(filename).\"   ) ) chat$register_tool(securer_as_ellmer_tool(   tools = tools,   timeout = 60,   limits = list(memory = 1024 * 1024 * 1024)  # 1 GB ))  # Multi-turn conversation with persistent state chat$chat(\"Load sales.csv and show me a summary\") chat$chat(\"What's the correlation between price and quantity?\") chat$chat(\"Create a scatter plot of price vs quantity\")"},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"using-with-other-llm-providers","dir":"Articles","previous_headings":"","what":"Using with other LLM providers","title":"Using securer with ellmer","text":"ellmer supports multiple LLM backends. securer works : tool definition provider-agnostic. model supports tool use see execute_r_code can call .","code":"# OpenAI chat <- chat_openai() chat$register_tool(securer_as_ellmer_tool())  # Anthropic chat <- chat_anthropic() chat$register_tool(securer_as_ellmer_tool())  # Ollama (local) chat <- chat_ollama(model = \"llama3\") chat$register_tool(securer_as_ellmer_tool())"},{"path":"https://ian-flores.github.io/securer/articles/ellmer-integration.html","id":"session-pooling","dir":"Articles","previous_headings":"","what":"Session pooling","title":"Using securer with ellmer","text":"applications handle multiple concurrent users, combine session pooling ellmer: pool pre-warms sessions low-latency raw code execution via pool$execute(). ellmer chat integration, securer_as_ellmer_tool() creates manages session (cleaned automatically garbage collected).","code":"# For raw code execution across concurrent users, use the pool directly. # pool$execute() handles session acquisition and release internally. pool <- SecureSessionPool$new(size = 4, tools = tools, sandbox = TRUE)  handle_user_code <- function(code) {   pool$execute(code, timeout = 30) }  # For ellmer integration with concurrent users, create a separate # SecureSession per request. Each session is cleaned up on GC. handle_user_chat <- function(user_message) {   chat <- chat_openai()   tool <- securer_as_ellmer_tool(tools = tools, sandbox = TRUE, timeout = 30)   chat$register_tool(tool)   chat$chat(user_message) }"},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Getting Started with securer","text":"securer runs R code child process isolated OS-level sandbox. Code running child can call named “tools” — functions execute host side, outside sandbox. Communication happens Unix domain socket using JSON messages. designed LLM agent systems model generates R code needs call host-provided tools (database queries, API calls, file operations) prevented accessing network writing arbitrary filesystem locations.","code":""},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"quick-start","dir":"Articles","previous_headings":"","what":"Quick start","title":"Getting Started with securer","text":"simplest way execute code execute_r(). creates session, runs code, tears everything automatically: default execute_r() enables OS sandbox (sandbox = TRUE). Pass sandbox = FALSE disable .","code":"library(securer)  execute_r(\"1 + 1\") #> [1] 2  execute_r(\"paste('Hello from', R.version.string)\") #> [1] \"Hello from R version 4.4.2 (2024-10-31)\""},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"defining-tools","dir":"Articles","previous_headings":"","what":"Defining tools","title":"Getting Started with securer","text":"Tools let sandboxed code call functions host. Define securer_tool(): tool four components: name – function name available code child process description – metadata (useful LLM tool-use prompts) fn – implementation, runs host side (outside sandbox) args – named list mapping argument names type strings; used generate typed wrapper functions runtime type checks child child process receives wrapper function (e.g. add()) serializes call JSON, sends Unix domain socket, blocks host responds, returns result. child’s perspective looks like normal function call.","code":"add_tool <- securer_tool(   name = \"add\",   description = \"Add two numbers\",   fn = function(a, b) a + b,   args = list(a = \"numeric\", b = \"numeric\") )"},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"supported-type-annotations","dir":"Articles","previous_headings":"Defining tools","what":"Supported type annotations","title":"Getting Started with securer","text":"Type annotations optional. Arguments without type annotations skip validation.","code":""},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"using-tools-with-execute_r","dir":"Articles","previous_headings":"","what":"Using tools with execute_r()","title":"Getting Started with securer","text":"Pass tools list:","code":"tools <- list(   securer_tool(\"add\", \"Add two numbers\",     fn = function(a, b) a + b,     args = list(a = \"numeric\", b = \"numeric\")),   securer_tool(\"get_weather\", \"Get weather for a city\",     fn = function(city) list(temp = 72, condition = \"sunny\"),     args = list(city = \"character\")) )  execute_r('add(2, 3)', tools = tools) #> [1] 5  execute_r('get_weather(\"Boston\")', tools = tools) #> $temp #> [1] 72 #> #> $condition #> [1] \"sunny\""},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"persistent-sessions-with-securesession","dir":"Articles","previous_headings":"","what":"Persistent sessions with SecureSession","title":"Getting Started with securer","text":"need execute multiple pieces code, reuse SecureSession avoid overhead starting new child process time: State persists across $execute() calls within session. variable x assigned first call available second. Always call $close() done. terminates child process, removes Unix domain socket, cleans temporary sandbox files.","code":"session <- SecureSession$new(tools = tools, sandbox = TRUE)  session$execute('x <- add(10, 20)') session$execute('x * 2') #> [1] 60  session$is_alive() #> [1] TRUE  session$close()"},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"sandbox","dir":"Articles","previous_headings":"","what":"Sandbox","title":"Getting Started with securer","text":"sandbox = TRUE, child process runs inside platform-native OS-level restrictions.","code":""},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"macos-seatbelt","dir":"Articles","previous_headings":"Sandbox","what":"macOS (Seatbelt)","title":"Getting Started with securer","text":"Uses sandbox-exec generated Seatbelt profile: File reads allowed everywhere (R needs system libs packages) File writes blocked except temp directories (/tmp, /var/folders/) remote network access blocked (TCP/UDP) Unix domain sockets allowed (needed IPC host)","code":"session <- SecureSession$new(sandbox = TRUE)  # Computation works normally: session$execute(\"1 + 1\") #> [1] 2  # Network access is blocked: session$execute('readLines(url(\"http://example.com\"))') #> Error: Operation not permitted  # Writing outside temp is blocked: session$execute('writeLines(\"test\", \"~/file.txt\")') #> Error: Operation not permitted  session$close()"},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"linux-bubblewrap","dir":"Articles","previous_headings":"Sandbox","what":"Linux (bubblewrap)","title":"Getting Started with securer","text":"Uses bwrap full namespace isolation (PID, network, user, mount, UTS, IPC). System libraries R bind-mounted read-. /tmp clean writable tmpfs. Network access blocked via network namespace. Requires bwrap installed. Debian/Ubuntu: apt install bubblewrap. Falls back unsandboxed execution warning found.","code":""},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"windows","dir":"Articles","previous_headings":"Sandbox","what":"Windows","title":"Getting Started with securer","text":"Provides environment-variable isolation (clears R_LIBS_USER, R_ENVIRON_USER, R_PROFILE_USER; redirects HOME/TMPDIR clean temp directory). filesystem network restrictions. warning issued.","code":""},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"resource-limits","dir":"Articles","previous_headings":"","what":"Resource limits","title":"Getting Started with securer","text":"Apply ulimit-based caps child process. work without sandbox: persistent session: Supported limits:","code":"# Limit CPU to 10 seconds and memory to 256 MB execute_r(   \"1 + 1\",   limits = list(cpu = 10, memory = 256 * 1024 * 1024) ) session <- SecureSession$new(   sandbox = TRUE,   limits = list(cpu = 30, fsize = 10 * 1024 * 1024) )  session$execute(\"1 + 1\") session$close()"},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"execution-timeout","dir":"Articles","previous_headings":"","what":"Execution timeout","title":"Getting Started with securer","text":"$execute() call accepts timeout parameter (seconds, default 30). code complete within timeout, error raised: timeout applies total wall-clock time execution, including tool calls.","code":"session <- SecureSession$new()  session$execute(\"Sys.sleep(60)\", timeout = 5) #> Error: Execution timed out  session$close()"},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"error-handling","dir":"Articles","previous_headings":"","what":"Error handling","title":"Getting Started with securer","text":"Errors child process propagated host: Errors tool execution also propagated: tool name registered, child receives error:","code":"execute_r('stop(\"something went wrong\")') #> Error: something went wrong bad_tool <- securer_tool(\"fail\", \"Always fails\",   fn = function() stop(\"tool error\"),   args = list() )  execute_r('fail()', tools = list(bad_tool)) #> Error: tool error execute_r('nonexistent_tool()', tools = list()) #> Error: Unknown tool: nonexistent_tool"},{"path":"https://ian-flores.github.io/securer/articles/getting-started.html","id":"architecture","dir":"Articles","previous_headings":"","what":"Architecture","title":"Getting Started with securer","text":"Key implementation details: child process uses processx::conn_connect_unix_socket() connect host’s server socket processx::conn_accept_unix_socket() transitions server connection -place bidirectional data connection (return new object) sandbox wrapper script injected via callr::r_session_options(arch = ...) callr treats direct path R binary contains / Socket paths use /tmp directly stay ~104 character limit Unix domain socket paths macOS","code":"Host process                          Child R process (sandboxed) -----------                          --------------------------- SecureSession$new()   |-- callr::r_session$new()  ------>  R starts inside sandbox   |-- UDS server socket        <---->  UDS client connect   |-- inject runtime code      ------>  .securer_call_tool() defined   |-- inject tool wrappers     ------>  tool_name() wrappers defined  $execute(\"tool_name('arg')\")   |                                     eval(\"tool_name('arg')\")   |                                       |-- serialize as JSON   |   <---- {\"tool\":\"tool_name\",...} -----+   |-- execute fn(\"arg\")                   |   (child blocks)   |-- write result JSON ---------------> |   |                                       +-- return result   |   <---- process complete -------------|   +-- return final value"},{"path":"https://ian-flores.github.io/securer/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Ian Flores Siaca. Author, maintainer.","code":""},{"path":"https://ian-flores.github.io/securer/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Flores Siaca (2026). securer: Secure R Code Execution Tool-Call IPC. R package version 0.1.0, https://ian-flores.github.io/securer/.","code":"@Manual{,   title = {securer: Secure R Code Execution with Tool-Call IPC},   author = {Ian {Flores Siaca}},   year = {2026},   note = {R package version 0.1.0},   url = {https://ian-flores.github.io/securer/}, }"},{"path":"https://ian-flores.github.io/securer/index.html","id":"securer","dir":"","previous_headings":"","what":"Secure R Code Execution with Tool-Call IPC","title":"Secure R Code Execution with Tool-Call IPC","text":"[!NOTE] Beta release (0.1.0). core API stabilizing may still change. Feedback bug reports welcome GitHub Issues. Let LLMs write R code calls functions — safely. LLM generates R code, need two things: way code call back application (tool calls), confidence code can’t anything dangerous (sandboxing). securer provides . child R process sandboxed OS level. Tool functions execute host side, outside sandbox, full access resources. LLM’s code never touches filesystem, network, data directly.","code":"library(securer)  # Your functions become tools the LLM's code can call tools <- list(   securer_tool(\"query_db\", \"Query a database table\",     fn = function(table, limit) head(get(table, \"package:datasets\"), limit),     args = list(table = \"character\", limit = \"numeric\")) )  # LLM-generated code runs sandboxed — tool calls pause, execute on your side, resume result <- execute_r('   data <- query_db(\"mtcars\", 5)   mean(data$mpg) ', tools = tools, sandbox = TRUE)"},{"path":"https://ian-flores.github.io/securer/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Secure R Code Execution with Tool-Call IPC","text":"","code":"# install.packages(\"pak\") pak::pak(\"ian-flores/securer\")"},{"path":[]},{"path":"https://ian-flores.github.io/securer/index.html","id":"how-it-works","dir":"","previous_headings":"","what":"How It Works","title":"Secure R Code Execution with Tool-Call IPC","text":"Communication happens Unix domain socket. Tool calls synchronous: child blocks parent fulfills request.","code":"┌──────────────────────┐        ┌──────────────────────┐ │    Parent (host)      │        │  Child (sandboxed R)  │ │                       │        │                       │ │  1. Send code ────────┼───────>│  2. eval(code)        │ │                       │  UDS   │                       │ │  3. Execute tool  <───┼────────│  Code calls tool()    │ │     (your function)   │        │  → pauses on socket   │ │                       │        │                       │ │  4. Send result ──────┼───────>│  5. Resumes with      │ │                       │        │     tool result       │ │                       │        │                       │ │  6. Receive final <───┼────────│  Returns final value  │ │     result            │        │                       │ └──────────────────────┘        └──────────────────────┘"},{"path":[]},{"path":"https://ian-flores.github.io/securer/index.html","id":"persistent-sessions","dir":"","previous_headings":"Features","what":"Persistent Sessions","title":"Secure R Code Execution with Tool-Call IPC","text":"Reuse session across multiple executions avoid startup overhead:","code":"session <- SecureSession$new(tools = tools, sandbox = TRUE)  session$execute('query_db(\"iris\", 3)') session$execute('query_db(\"mtcars\", 5)')  session$close()"},{"path":"https://ian-flores.github.io/securer/index.html","id":"session-pooling","dir":"","previous_headings":"Features","what":"Session Pooling","title":"Secure R Code Execution with Tool-Call IPC","text":"Pre-warm multiple sessions low-latency concurrent execution:","code":"pool <- SecureSessionPool$new(size = 4, tools = tools, sandbox = TRUE)  result <- pool$execute('query_db(\"iris\", 3)')  pool$close()"},{"path":"https://ian-flores.github.io/securer/index.html","id":"resource-limits","dir":"","previous_headings":"Features","what":"Resource Limits","title":"Secure R Code Execution with Tool-Call IPC","text":"Constrain CPU, memory, file size regardless sandbox mode:","code":"result <- execute_r(\"1 + 1\",   limits = list(cpu = 10, memory = 256 * 1024 * 1024) )"},{"path":"https://ian-flores.github.io/securer/index.html","id":"execution-timeouts","dir":"","previous_headings":"Features","what":"Execution Timeouts","title":"Secure R Code Execution with Tool-Call IPC","text":"Kill long-running code automatically. session recovers reusable:","code":"session <- SecureSession$new() session$execute(\"Sys.sleep(100)\", timeout = 5) # Error: Execution timed out after 5 seconds session$execute(\"1 + 1\")  # still works"},{"path":"https://ian-flores.github.io/securer/index.html","id":"code-pre-validation","dir":"","previous_headings":"Features","what":"Code Pre-Validation","title":"Secure R Code Execution with Tool-Call IPC","text":"Catch syntax errors sending code child process:","code":"session$execute(\"if (TRUE {\")  # immediate error, no child round-trip"},{"path":"https://ian-flores.github.io/securer/index.html","id":"ellmer-integration","dir":"","previous_headings":"Features","what":"ellmer Integration","title":"Secure R Code Execution with Tool-Call IPC","text":"Use securer code execution tool ellmer LLM chats:","code":"library(ellmer) chat <- chat_openai() chat$register_tool(securer_as_ellmer_tool()) chat$chat(\"Calculate the mean of 1 through 100 using R\")"},{"path":"https://ian-flores.github.io/securer/index.html","id":"audit-logging","dir":"","previous_headings":"Features","what":"Audit Logging","title":"Secure R Code Execution with Tool-Call IPC","text":"Write structured JSONL logs session events compliance debugging:","code":"session <- SecureSession$new(audit_log = \"session.jsonl\")"},{"path":"https://ian-flores.github.io/securer/index.html","id":"verbose-logging","dir":"","previous_headings":"Features","what":"Verbose Logging","title":"Secure R Code Execution with Tool-Call IPC","text":"Debug session behavior human-readable message() output:","code":"session <- SecureSession$new(verbose = TRUE) # [securer] Session started (sandbox=FALSE, pid=1234) # [securer] Tool call: query_db(table=\"iris\", limit=3) # [securer] Execution complete (0.5s)"},{"path":"https://ian-flores.github.io/securer/index.html","id":"platform-support","dir":"","previous_headings":"","what":"Platform Support","title":"Secure R Code Execution with Tool-Call IPC","text":"Linux macOS provide full OS-level sandboxing. Windows provides environment variable isolation (clean HOME, empty R_LIBS_USER). platforms support resource limits tool call IPC.","code":""},{"path":"https://ian-flores.github.io/securer/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"Secure R Code Execution with Tool-Call IPC","text":"vignette(\"getting-started\", package = \"securer\") — full walkthrough pkgdown site — API reference","code":""},{"path":"https://ian-flores.github.io/securer/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Secure R Code Execution with Tool-Call IPC","text":"MIT","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":null,"dir":"Reference","previous_headings":"","what":"SecureSession — SecureSession","title":"SecureSession — SecureSession","text":"R6 class secure code execution tool-call IPC. Wraps callr::r_session bidirectional Unix domain socket protocol allows code running child process pause, call tools parent side, resume result.","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"SecureSession — SecureSession","text":"R6 object class SecureSession.","code":""},{"path":[]},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"SecureSession — SecureSession","text":"SecureSession$new() SecureSession$execute() SecureSession$close() SecureSession$is_alive() SecureSession$clone()","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"SecureSession — SecureSession","text":"Create new SecureSession","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"SecureSession — SecureSession","text":"","code":"SecureSession$new(   tools = list(),   sandbox = FALSE,   limits = NULL,   verbose = FALSE,   audit_log = NULL )"},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"SecureSession — SecureSession","text":"tools list securer_tool() objects, named list functions (legacy format backward compatibility) sandbox Logical, whether enable OS-level sandbox. macOS uses sandbox-exec Seatbelt profile denies network access restricts file writes temp directories.  Linux uses bubblewrap (bwrap) full namespace isolation.  Windows provides environment isolation (clean HOME/TMPDIR, empty R_LIBS_USER) resource limits (memory, CPU time, process count) via Job Objects. platforms session runs without sandboxing. limits optional named list resource limits apply child process via ulimit.  Supported names: cpu (seconds), memory (bytes, virtual address space), fsize (bytes, max file size), nproc (max processes), nofile (max open files), stack (bytes, stack size).  sandbox = TRUE limits NULL (default), sensible defaults applied automatically (see default_limits()).  Pass limits = list() explicitly disable resource limits.  sandbox = FALSE, NULL means limits. verbose Logical, whether emit diagnostic messages via message().  Useful debugging.  Users can suppress suppressMessages(). audit_log Optional path JSONL file persistent audit logging.  NULL (default), file logging performed. path provided, structured JSON entries appended session lifecycle events, executions, tool calls.","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"method-execute-","dir":"Reference","previous_headings":"","what":"Method execute()","title":"SecureSession — SecureSession","text":"Execute R code secure session","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"SecureSession — SecureSession","text":"","code":"SecureSession$execute(   code,   timeout = NULL,   validate = TRUE,   output_handler = NULL,   max_tool_calls = NULL )"},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"SecureSession — SecureSession","text":"code Character string R code execute timeout Timeout seconds, NULL timeout (default NULL) validate Logical, whether pre-validate code syntax errors sending child process (default TRUE). output_handler optional callback function receives output lines (character) arrive child process. NULL (default), output collected returned \"output\" attribute result. max_tool_calls Maximum number tool calls allowed execution, NULL unlimited (default NULL).","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"SecureSession — SecureSession","text":"result evaluating code, \"output\" attribute containing captured stdout/stderr character vector.","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"method-close-","dir":"Reference","previous_headings":"","what":"Method close()","title":"SecureSession — SecureSession","text":"Close session clean resources","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"SecureSession — SecureSession","text":"","code":"SecureSession$close()"},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"SecureSession — SecureSession","text":"Invisible self","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"method-is-alive-","dir":"Reference","previous_headings":"","what":"Method is_alive()","title":"SecureSession — SecureSession","text":"Check session alive","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"SecureSession — SecureSession","text":"","code":"SecureSession$is_alive()"},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"returns-2","dir":"Reference","previous_headings":"","what":"Returns","title":"SecureSession — SecureSession","text":"Logical","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"SecureSession — SecureSession","text":"objects class cloneable method.","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"SecureSession — SecureSession","text":"","code":"SecureSession$clone(deep = FALSE)"},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"SecureSession — SecureSession","text":"deep Whether make deep clone.","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSession.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"SecureSession — SecureSession","text":"","code":"# \\donttest{ # Basic usage session <- SecureSession$new() session$execute(\"1 + 1\") #> [1] 2 session$close()  # With tools tools <- list(   securer_tool(\"add\", \"Add numbers\",     fn = function(a, b) a + b,     args = list(a = \"numeric\", b = \"numeric\")) ) session <- SecureSession$new(tools = tools) session$execute(\"add(2, 3)\") #> [1] 5 session$close() # } if (FALSE) { # \\dontrun{ # With sandbox (requires platform-specific tools) session <- SecureSession$new(sandbox = TRUE) session$execute(\"1 + 1\") session$close() } # }"},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":null,"dir":"Reference","previous_headings":"","what":"SecureSessionPool — SecureSessionPool","title":"SecureSessionPool — SecureSessionPool","text":"R6 class pool pre-warmed SecureSession instances. Creates multiple sessions initialization time $execute() calls can run immediately idle session without waiting process startup. Sessions returned pool execution completes (errors).","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"SecureSessionPool — SecureSessionPool","text":"R6 object class SecureSessionPool.","code":""},{"path":[]},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"SecureSessionPool — SecureSessionPool","text":"SecureSessionPool$new() SecureSessionPool$execute() SecureSessionPool$size() SecureSessionPool$available() SecureSessionPool$close() SecureSessionPool$clone()","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"SecureSessionPool — SecureSessionPool","text":"Create new SecureSessionPool","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"SecureSessionPool — SecureSessionPool","text":"","code":"SecureSessionPool$new(   size = 4L,   tools = list(),   sandbox = TRUE,   limits = NULL,   verbose = FALSE )"},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"SecureSessionPool — SecureSessionPool","text":"size Integer, number sessions pre-warm (default 4, minimum 1). tools list securer_tool() objects passed session. sandbox Logical, whether enable OS-level sandboxing. limits Optional named list resource limits. verbose Logical, whether emit diagnostic messages.","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"method-execute-","dir":"Reference","previous_headings":"","what":"Method execute()","title":"SecureSessionPool — SecureSessionPool","text":"Execute R code available pooled session","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"SecureSessionPool — SecureSessionPool","text":"","code":"SecureSessionPool$execute(code, timeout = NULL)"},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"SecureSessionPool — SecureSessionPool","text":"code Character string R code execute. timeout Timeout seconds, NULL timeout.","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"SecureSessionPool — SecureSessionPool","text":"result evaluating code.","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"method-size-","dir":"Reference","previous_headings":"","what":"Method size()","title":"SecureSessionPool — SecureSessionPool","text":"Number sessions pool","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"SecureSessionPool — SecureSessionPool","text":"","code":"SecureSessionPool$size()"},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"SecureSessionPool — SecureSessionPool","text":"Integer","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"method-available-","dir":"Reference","previous_headings":"","what":"Method available()","title":"SecureSessionPool — SecureSessionPool","text":"Number idle (non-busy) sessions","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"SecureSessionPool — SecureSessionPool","text":"","code":"SecureSessionPool$available()"},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"returns-2","dir":"Reference","previous_headings":"","what":"Returns","title":"SecureSessionPool — SecureSessionPool","text":"Integer","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"method-close-","dir":"Reference","previous_headings":"","what":"Method close()","title":"SecureSessionPool — SecureSessionPool","text":"Close sessions shut pool","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"SecureSessionPool — SecureSessionPool","text":"","code":"SecureSessionPool$close()"},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"returns-3","dir":"Reference","previous_headings":"","what":"Returns","title":"SecureSessionPool — SecureSessionPool","text":"Invisible self","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"SecureSessionPool — SecureSessionPool","text":"objects class cloneable method.","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"SecureSessionPool — SecureSessionPool","text":"","code":"SecureSessionPool$clone(deep = FALSE)"},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"SecureSessionPool — SecureSessionPool","text":"deep Whether make deep clone.","code":""},{"path":"https://ian-flores.github.io/securer/reference/SecureSessionPool.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"SecureSessionPool — SecureSessionPool","text":"","code":"# \\donttest{ pool <- SecureSessionPool$new(size = 2, sandbox = FALSE) pool$execute(\"1 + 1\") #> [1] 2 pool$execute(\"2 + 2\") #> [1] 4 pool$close() # }"},{"path":"https://ian-flores.github.io/securer/reference/apply_windows_job_object.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply Windows Job Object limits to a process — apply_windows_job_object","title":"Apply Windows Job Object limits to a process — apply_windows_job_object","text":"Generates executes PowerShell script uses C# P/Invoke create Job Object specified resource limits assign target process .","code":""},{"path":"https://ian-flores.github.io/securer/reference/apply_windows_job_object.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply Windows Job Object limits to a process — apply_windows_job_object","text":"","code":"apply_windows_job_object(pid, limits)"},{"path":"https://ian-flores.github.io/securer/reference/apply_windows_job_object.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply Windows Job Object limits to a process — apply_windows_job_object","text":"pid Integer process ID constrain limits Named list supported limits (cpu, memory, nproc)","code":""},{"path":"https://ian-flores.github.io/securer/reference/apply_windows_job_object.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply Windows Job Object limits to a process — apply_windows_job_object","text":"Invisible NULL.  Warns failure (best-effort).","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_limits_only_wrapper.html","id":null,"dir":"Reference","previous_headings":"","what":"Build a minimal wrapper script that only applies resource limits — build_limits_only_wrapper","title":"Build a minimal wrapper script that only applies resource limits — build_limits_only_wrapper","text":"Used sandbox = FALSE limits provided.  Creates shell wrapper sets ulimit values execs R.","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_limits_only_wrapper.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build a minimal wrapper script that only applies resource limits — build_limits_only_wrapper","text":"","code":"build_limits_only_wrapper(limits)"},{"path":"https://ian-flores.github.io/securer/reference/build_limits_only_wrapper.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build a minimal wrapper script that only applies resource limits — build_limits_only_wrapper","text":"limits named list resource limits.","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_limits_only_wrapper.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build a minimal wrapper script that only applies resource limits — build_limits_only_wrapper","text":"sandbox config list wrapper profile_path = NULL.","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_config.html","id":null,"dir":"Reference","previous_headings":"","what":"Build sandbox configuration for the current platform — build_sandbox_config","title":"Build sandbox configuration for the current platform — build_sandbox_config","text":"Inspects operating system delegates appropriate platform- specific sandbox builder.  Returns list start_session() uses wrap child R process.","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_config.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build sandbox configuration for the current platform — build_sandbox_config","text":"","code":"build_sandbox_config(socket_path, r_home = R.home(), limits = NULL)"},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_config.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build sandbox configuration for the current platform — build_sandbox_config","text":"socket_path Path UDS socket (must writable child) r_home Path R installation (default: R.home()) limits Optional named list resource limits (see generate_ulimit_commands())","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_config.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build sandbox configuration for the current platform — build_sandbox_config","text":"list elements: wrapper Path shell wrapper script, NULL profile_path Path generated sandbox profile, NULL","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_fallback.html","id":null,"dir":"Reference","previous_headings":"","what":"Build fallback sandbox configuration (no OS sandbox) — build_sandbox_fallback","title":"Build fallback sandbox configuration (no OS sandbox) — build_sandbox_fallback","text":"Used platform-specific sandbox available.  Returns config NULL wrapper profile session starts without OS-level isolation.","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_fallback.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build fallback sandbox configuration (no OS sandbox) — build_sandbox_fallback","text":"","code":"build_sandbox_fallback(socket_path, r_home)"},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_fallback.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build fallback sandbox configuration (no OS sandbox) — build_sandbox_fallback","text":"socket_path Path UDS socket r_home Path R installation","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_fallback.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build fallback sandbox configuration (no OS sandbox) — build_sandbox_fallback","text":"sandbox config list wrapper = NULL profile_path = NULL","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_linux.html","id":null,"dir":"Reference","previous_headings":"","what":"Build Linux sandbox configuration — build_sandbox_linux","title":"Build Linux sandbox configuration — build_sandbox_linux","text":"Locates bwrap (bubblewrap) creates wrapper shell script launches R inside fully-isolated sandbox.  wrapper can passed callr::r_session_options() via arch parameter.","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_linux.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build Linux sandbox configuration — build_sandbox_linux","text":"","code":"build_sandbox_linux(socket_path, r_home, limits = NULL)"},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_linux.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build Linux sandbox configuration — build_sandbox_linux","text":"socket_path Path UDS socket r_home Path R installation limits Optional named list resource limits (see generate_ulimit_commands())","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_linux.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build Linux sandbox configuration — build_sandbox_linux","text":"sandbox config list (see build_sandbox_config())","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_macos.html","id":null,"dir":"Reference","previous_headings":"","what":"Build macOS sandbox configuration — build_sandbox_macos","title":"Build macOS sandbox configuration — build_sandbox_macos","text":"Writes temporary Seatbelt profile creates wrapper shell script launches R inside sandbox-exec.  wrapper can passed callr::r_session_options() via arch parameter (callr uses path R binary).","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_macos.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build macOS sandbox configuration — build_sandbox_macos","text":"","code":"build_sandbox_macos(socket_path, r_home, limits = NULL)"},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_macos.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build macOS sandbox configuration — build_sandbox_macos","text":"socket_path Path UDS socket r_home Path R installation limits Optional named list resource limits (see generate_ulimit_commands())","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_macos.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build macOS sandbox configuration — build_sandbox_macos","text":"sandbox config list (see build_sandbox_config())","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_windows.html","id":null,"dir":"Reference","previous_headings":"","what":"Build Windows sandbox configuration — build_sandbox_windows","title":"Build Windows sandbox configuration — build_sandbox_windows","text":"Provides environment isolation optional resource limits via Windows Job Objects.  Environment isolation creates sanitized set environment variables clean HOME, TMPDIR, TMP, TEMP pointing private temp directory, empty R_LIBS_USER.","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_windows.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build Windows sandbox configuration — build_sandbox_windows","text":"","code":"build_sandbox_windows(socket_path, r_home, limits = NULL)"},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_windows.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build Windows sandbox configuration — build_sandbox_windows","text":"socket_path Path UDS socket r_home Path R installation limits Optional named list resource limits.  Supported Windows via Job Objects: cpu, memory, nproc.  Unsupported (warn): fsize, nofile, stack.","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_windows.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build Windows sandbox configuration — build_sandbox_windows","text":"list elements: wrapper Always NULL Windows (wrapper script) profile_path Always NULL Windows env named character vector sanitized environment variables sandbox_tmp Path private temp directory apply_limits function taking PID apply Job Object limits, NULL supported limits requested","code":""},{"path":"https://ian-flores.github.io/securer/reference/build_sandbox_windows.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Build Windows sandbox configuration — build_sandbox_windows","text":"resource limits provided (cpu, memory, nproc), PowerShell script using C# P/Invoke generated create Job Object specified constraints assign child process .  Limits Job Object equivalent (fsize, nofile, stack) emit warning skipped.","code":""},{"path":"https://ian-flores.github.io/securer/reference/child_runtime_code.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate the R code to inject into the child process — child_runtime_code","title":"Generate the R code to inject into the child process — child_runtime_code","text":"Returns character string R code , evaluated child process, sets IPC connection defines .securer_call_tool().","code":""},{"path":"https://ian-flores.github.io/securer/reference/child_runtime_code.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate the R code to inject into the child process — child_runtime_code","text":"","code":"child_runtime_code()"},{"path":"https://ian-flores.github.io/securer/reference/child_runtime_code.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate the R code to inject into the child process — child_runtime_code","text":"single character string R code","code":""},{"path":"https://ian-flores.github.io/securer/reference/default_limits.html","id":null,"dir":"Reference","previous_headings":"","what":"Default resource limits for sandboxed sessions — default_limits","title":"Default resource limits for sandboxed sessions — default_limits","text":"Returns sensible defaults applied automatically sandbox = TRUE explicit limits provided.  Users can override limits = list() (empty list) explicitly disable limits.","code":""},{"path":"https://ian-flores.github.io/securer/reference/default_limits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default resource limits for sandboxed sessions — default_limits","text":"","code":"default_limits()"},{"path":"https://ian-flores.github.io/securer/reference/default_limits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Default resource limits for sandboxed sessions — default_limits","text":"named list resource limits.","code":""},{"path":"https://ian-flores.github.io/securer/reference/execute_r.html","id":null,"dir":"Reference","previous_headings":"","what":"Execute R code securely with tool support — execute_r","title":"Execute R code securely with tool support — execute_r","text":"convenience wrapper creates SecureSession, executes code, returns result. session automatically closed done.","code":""},{"path":"https://ian-flores.github.io/securer/reference/execute_r.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Execute R code securely with tool support — execute_r","text":"","code":"execute_r(   code,   tools = list(),   timeout = 30,   sandbox = TRUE,   limits = NULL,   verbose = FALSE,   validate = TRUE,   audit_log = NULL )"},{"path":"https://ian-flores.github.io/securer/reference/execute_r.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Execute R code securely with tool support — execute_r","text":"code Character string R code execute. tools List tools created securer_tool(), named list functions (legacy format). timeout Timeout seconds execution, NULL timeout (default 30). sandbox Logical, whether enable OS-level sandboxing (default TRUE). limits Optional named list resource limits (see SecureSession details). verbose Logical, whether emit diagnostic messages via message().  Useful debugging.  Users can suppress suppressMessages(). validate Logical, whether pre-validate code syntax errors sending child process (default TRUE). audit_log Optional path JSONL file persistent audit logging (default NULL, file logging).","code":""},{"path":"https://ian-flores.github.io/securer/reference/execute_r.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Execute R code securely with tool support — execute_r","text":"result evaluating code secure session.","code":""},{"path":"https://ian-flores.github.io/securer/reference/execute_r.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Execute R code securely with tool support — execute_r","text":"","code":"# \\donttest{ # Simple computation execute_r(\"1 + 1\", sandbox = FALSE) #> [1] 2  # With tools result <- execute_r(   code = 'add(2, 3)',   tools = list(     securer_tool(\"add\", \"Add two numbers\",       fn = function(a, b) a + b,       args = list(a = \"numeric\", b = \"numeric\"))   ),   sandbox = FALSE ) # } if (FALSE) { # \\dontrun{ # With resource limits (Unix only) execute_r(\"1 + 1\", limits = list(cpu = 10, memory = 256 * 1024 * 1024)) } # }"},{"path":"https://ian-flores.github.io/securer/reference/format_tool_result.html","id":null,"dir":"Reference","previous_headings":"","what":"Format an R value as a tool result string — format_tool_result","title":"Format an R value as a tool result string — format_tool_result","text":"Converts R objects human-readable string suitable returning LLM tool result. Data frames get truncated print representation; scalars coerced directly; objects use capture.output(print(...)).","code":""},{"path":"https://ian-flores.github.io/securer/reference/format_tool_result.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format an R value as a tool result string — format_tool_result","text":"","code":"format_tool_result(value)"},{"path":"https://ian-flores.github.io/securer/reference/format_tool_result.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format an R value as a tool result string — format_tool_result","text":"value R object returned code execution.","code":""},{"path":"https://ian-flores.github.io/securer/reference/format_tool_result.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format an R value as a tool result string — format_tool_result","text":"character string.","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_bwrap_args.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate bubblewrap CLI arguments for the sandboxed R session — generate_bwrap_args","title":"Generate bubblewrap CLI arguments for the sandboxed R session — generate_bwrap_args","text":"Creates character vector bwrap arguments : Isolates namespaces (PID, net, user, mount, UTS, IPC) Bind-mounts system libraries R read-Provides clean writable /tmp UDS socket overlaid Blocks network access via namespace isolation","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_bwrap_args.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate bubblewrap CLI arguments for the sandboxed R session — generate_bwrap_args","text":"","code":"generate_bwrap_args(socket_path, r_home)"},{"path":"https://ian-flores.github.io/securer/reference/generate_bwrap_args.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate bubblewrap CLI arguments for the sandboxed R session — generate_bwrap_args","text":"socket_path Path UDS socket r_home Path R installation","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_bwrap_args.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate bubblewrap CLI arguments for the sandboxed R session — generate_bwrap_args","text":"character vector bwrap CLI arguments","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_seatbelt_profile.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a macOS Seatbelt profile for the sandboxed R session — generate_seatbelt_profile","title":"Generate a macOS Seatbelt profile for the sandboxed R session — generate_seatbelt_profile","text":"Creates Seatbelt policy string : Denies operations default Allows file reads R installation, library paths, system libraries, temp directories (blocks ~/.ssh, ~/.env, etc.) Allows file writes temp directory (UDS + R temp files) Allows Unix domain socket operations (IPC parent) Denies remote network access (TCP/UDP) Allows process-fork process-exec R binary Allows specific system operations R needs","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_seatbelt_profile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a macOS Seatbelt profile for the sandboxed R session — generate_seatbelt_profile","text":"","code":"generate_seatbelt_profile(socket_path, r_home, lib_paths = .libPaths())"},{"path":"https://ian-flores.github.io/securer/reference/generate_seatbelt_profile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a macOS Seatbelt profile for the sandboxed R session — generate_seatbelt_profile","text":"socket_path Path UDS socket r_home Path R installation lib_paths Character vector R library paths (default: .libPaths())","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_seatbelt_profile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a macOS Seatbelt profile for the sandboxed R session — generate_seatbelt_profile","text":"single character string containing Seatbelt profile","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_tool_wrappers.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate wrapper code for tools in the child process — generate_tool_wrappers","title":"Generate wrapper code for tools in the child process — generate_tool_wrappers","text":"securer_tool() object, generates R function child's global environment delegates .securer_call_tool() tool name arguments.","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_tool_wrappers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate wrapper code for tools in the child process — generate_tool_wrappers","text":"","code":"generate_tool_wrappers(tools)"},{"path":"https://ian-flores.github.io/securer/reference/generate_tool_wrappers.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate wrapper code for tools in the child process — generate_tool_wrappers","text":"tools List securer_tool objects","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_tool_wrappers.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate wrapper code for tools in the child process — generate_tool_wrappers","text":"Character string R code creates wrapper functions","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_type_checks.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate type validation code for tool arguments — generate_type_checks","title":"Generate type validation code for tool arguments — generate_type_checks","text":"Produces R code character string checks argument's type declared type annotation. Arguments without type annotations skipped.","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_type_checks.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate type validation code for tool arguments — generate_type_checks","text":"","code":"generate_type_checks(tool_name, args)"},{"path":"https://ian-flores.github.io/securer/reference/generate_type_checks.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate type validation code for tool arguments — generate_type_checks","text":"tool_name Character, tool name (error messages) args Named list mapping argument names type strings","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_type_checks.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate type validation code for tool arguments — generate_type_checks","text":"Character string R code performing type checks (may empty)","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_ulimit_commands.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate ulimit shell commands from a limits list — generate_ulimit_commands","title":"Generate ulimit shell commands from a limits list — generate_ulimit_commands","text":"Translates user-facing limits list shell ulimit commands can injected wrapper scripts exec line.","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_ulimit_commands.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate ulimit shell commands from a limits list — generate_ulimit_commands","text":"","code":"generate_ulimit_commands(limits)"},{"path":"https://ian-flores.github.io/securer/reference/generate_ulimit_commands.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate ulimit shell commands from a limits list — generate_ulimit_commands","text":"limits named list resource limits, NULL limits.","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_ulimit_commands.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate ulimit shell commands from a limits list — generate_ulimit_commands","text":"character vector shell commands (one per limit), character(0) limits NULL empty.","code":""},{"path":"https://ian-flores.github.io/securer/reference/generate_ulimit_commands.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate ulimit shell commands from a limits list — generate_ulimit_commands","text":"Supported limit names: cpu CPU time seconds (ulimit -t) memory Virtual memory (address space) bytes (ulimit -v). Converted kilobytes ulimit. fsize Maximum file size bytes (ulimit -f). Converted 512-byte blocks ulimit. nproc Maximum number processes (ulimit -u) nofile Maximum number open files (ulimit -n) stack Maximum stack size bytes (ulimit -s). Converted kilobytes ulimit.","code":""},{"path":"https://ian-flores.github.io/securer/reference/ipc_accept.html","id":null,"dir":"Reference","previous_headings":"","what":"Accept a client connection on a Unix domain socket server — ipc_accept","title":"Accept a client connection on a Unix domain socket server — ipc_accept","text":"Polls server connection accepts incoming client. Note: processx::conn_accept_unix_socket() transitions server connection \"connected_server\" state. calling , server_conn object used bidirectional data transfer.","code":""},{"path":"https://ian-flores.github.io/securer/reference/ipc_accept.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Accept a client connection on a Unix domain socket server — ipc_accept","text":"","code":"ipc_accept(server_conn, timeout = 5000L)"},{"path":"https://ian-flores.github.io/securer/reference/ipc_accept.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Accept a client connection on a Unix domain socket server — ipc_accept","text":"server_conn server connection returned ipc_create_server() timeout Timeout milliseconds (default 5000)","code":""},{"path":"https://ian-flores.github.io/securer/reference/ipc_accept.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Accept a client connection on a Unix domain socket server — ipc_accept","text":"Invisible NULL; server_conn modified place","code":""},{"path":"https://ian-flores.github.io/securer/reference/ipc_create_server.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Unix domain socket server — ipc_create_server","title":"Create a Unix domain socket server — ipc_create_server","text":"Create Unix domain socket server","code":""},{"path":"https://ian-flores.github.io/securer/reference/ipc_create_server.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Unix domain socket server — ipc_create_server","text":"","code":"ipc_create_server(path)"},{"path":"https://ian-flores.github.io/securer/reference/ipc_create_server.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Unix domain socket server — ipc_create_server","text":"path Character string, file path socket","code":""},{"path":"https://ian-flores.github.io/securer/reference/ipc_create_server.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Unix domain socket server — ipc_create_server","text":"server connection object processx","code":""},{"path":"https://ian-flores.github.io/securer/reference/ipc_read_message.html","id":null,"dir":"Reference","previous_headings":"","what":"Read a message from an IPC connection — ipc_read_message","title":"Read a message from an IPC connection — ipc_read_message","text":"Reads single newline-terminated JSON line connection, timeout. Returns parsed list. Raises error timeout.","code":""},{"path":"https://ian-flores.github.io/securer/reference/ipc_read_message.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read a message from an IPC connection — ipc_read_message","text":"","code":"ipc_read_message(conn, timeout = 30000L)"},{"path":"https://ian-flores.github.io/securer/reference/ipc_read_message.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read a message from an IPC connection — ipc_read_message","text":"conn connection object timeout Timeout milliseconds (default 30000)","code":""},{"path":"https://ian-flores.github.io/securer/reference/ipc_read_message.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read a message from an IPC connection — ipc_read_message","text":"parsed list JSON message","code":""},{"path":"https://ian-flores.github.io/securer/reference/ipc_write_message.html","id":null,"dir":"Reference","previous_headings":"","what":"Write a message to an IPC connection — ipc_write_message","title":"Write a message to an IPC connection — ipc_write_message","text":"Serializes list JSON writes single newline-terminated line.","code":""},{"path":"https://ian-flores.github.io/securer/reference/ipc_write_message.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write a message to an IPC connection — ipc_write_message","text":"","code":"ipc_write_message(conn, msg)"},{"path":"https://ian-flores.github.io/securer/reference/ipc_write_message.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write a message to an IPC connection — ipc_write_message","text":"conn connection object msg list serialize send","code":""},{"path":"https://ian-flores.github.io/securer/reference/ipc_write_message.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write a message to an IPC connection — ipc_write_message","text":"Invisible NULL; called side effect writing connection.","code":""},{"path":"https://ian-flores.github.io/securer/reference/securer-package.html","id":null,"dir":"Reference","previous_headings":"","what":"securer: Secure R Code Execution with Tool-Call IPC — securer-package","title":"securer: Secure R Code Execution with Tool-Call IPC — securer-package","text":"Wraps callr::r_session bidirectional IPC protocol pause/resume tool calls, enabling safe execution LLM-generated R code inside OS-level sandbox. main entry points : execute_r() – convenience function one-shot execution SecureSession – R6 class persistent sessions tool support securer_tool() – define tools child code can call","code":""},{"path":[]},{"path":"https://ian-flores.github.io/securer/reference/securer-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"securer: Secure R Code Execution with Tool-Call IPC — securer-package","text":"Maintainer: Ian Flores Siaca iflores.siaca@hey.com","code":""},{"path":"https://ian-flores.github.io/securer/reference/securer_as_ellmer_tool.html","id":null,"dir":"Reference","previous_headings":"","what":"Create an ellmer tool for secure R code execution — securer_as_ellmer_tool","title":"Create an ellmer tool for secure R code execution — securer_as_ellmer_tool","text":"Wraps SecureSession ellmer::tool() definition LLM can execute R code sandboxed environment. tool accepts single code argument (string R code) returns result.","code":""},{"path":"https://ian-flores.github.io/securer/reference/securer_as_ellmer_tool.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create an ellmer tool for secure R code execution — securer_as_ellmer_tool","text":"","code":"securer_as_ellmer_tool(   session = NULL,   tools = list(),   sandbox = TRUE,   limits = NULL,   timeout = 30 )"},{"path":"https://ian-flores.github.io/securer/reference/securer_as_ellmer_tool.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create an ellmer tool for secure R code execution — securer_as_ellmer_tool","text":"session SecureSession object. NULL (default), new session created given tools, sandbox, limits arguments. supply session, arguments ignored. tools list securer_tool() objects register session. used session NULL. sandbox Logical, whether enable OS-level sandboxing. used session NULL. Defaults TRUE. limits Optional named list resource limits. used session NULL. timeout Timeout seconds code execution, NULL timeout. Defaults 30.","code":""},{"path":"https://ian-flores.github.io/securer/reference/securer_as_ellmer_tool.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create an ellmer tool for secure R code execution — securer_as_ellmer_tool","text":"ellmer ToolDef object can registered chat$register_tool().","code":""},{"path":"https://ian-flores.github.io/securer/reference/securer_as_ellmer_tool.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create an ellmer tool for secure R code execution — securer_as_ellmer_tool","text":"","code":"if (FALSE) { # \\dontrun{ library(ellmer)  # Basic usage: LLM can execute R code in a sandbox chat <- chat_openai() chat$register_tool(securer_as_ellmer_tool()) chat$chat(\"What is the mean of the numbers 1 through 100?\")  # With custom tools available inside the sandbox tools <- list(   securer_tool(\"fetch_data\", \"Fetch a dataset by name\",     fn = function(name) get(name, \"package:datasets\"),     args = list(name = \"character\")) ) chat$register_tool(securer_as_ellmer_tool(tools = tools)) chat$chat(\"Load the mtcars dataset and compute the mean mpg.\")  # With a pre-existing session session <- SecureSession$new(sandbox = TRUE) chat$register_tool(securer_as_ellmer_tool(session = session)) # ... use chat ... session$close() } # }"},{"path":"https://ian-flores.github.io/securer/reference/securer_tool.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a tool definition — securer_tool","title":"Create a tool definition — securer_tool","text":"Defines named tool function implementation typed argument metadata. Tool objects passed SecureSession execute_r() code running sandboxed child process can call tool name parent process executes actual function.","code":""},{"path":"https://ian-flores.github.io/securer/reference/securer_tool.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a tool definition — securer_tool","text":"","code":"securer_tool(name, description, fn, args = list())"},{"path":"https://ian-flores.github.io/securer/reference/securer_tool.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a tool definition — securer_tool","text":"name Character, tool name (must non-empty). description Character, description tool . fn Function implements tool. args Named list mapping argument names type strings (e.g. list(city = \"character\")). Used generate wrapper functions child process correct formal arguments.","code":""},{"path":"https://ian-flores.github.io/securer/reference/securer_tool.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a tool definition — securer_tool","text":"securer_tool object (list class \"securer_tool\").","code":""},{"path":"https://ian-flores.github.io/securer/reference/securer_tool.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a tool definition — securer_tool","text":"","code":"tool <- securer_tool(   \"add\", \"Add two numbers\",   fn = function(a, b) a + b,   args = list(a = \"numeric\", b = \"numeric\") ) tool$name #> [1] \"add\" # \"add\""},{"path":"https://ian-flores.github.io/securer/reference/type_check_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Map of type annotation strings to R type-checking functions — type_check_map","title":"Map of type annotation strings to R type-checking functions — type_check_map","text":"Map type annotation strings R type-checking functions","code":""},{"path":"https://ian-flores.github.io/securer/reference/type_check_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Map of type annotation strings to R type-checking functions — type_check_map","text":"","code":"type_check_map"},{"path":"https://ian-flores.github.io/securer/reference/type_check_map.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Map of type annotation strings to R type-checking functions — type_check_map","text":"object class character length 6.","code":""},{"path":"https://ian-flores.github.io/securer/reference/validate_code.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate R code before execution — validate_code","title":"Validate R code before execution — validate_code","text":"Parses code string catch syntax errors optionally checks potentially dangerous function calls.  intended fast pre-check obviously broken code never reaches child process.","code":""},{"path":"https://ian-flores.github.io/securer/reference/validate_code.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate R code before execution — validate_code","text":"","code":"validate_code(code)"},{"path":"https://ian-flores.github.io/securer/reference/validate_code.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate R code before execution — validate_code","text":"code Character string R code validate.","code":""},{"path":"https://ian-flores.github.io/securer/reference/validate_code.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate R code before execution — validate_code","text":"list components: valid Logical. TRUE code parses without error. error NULL success, character string describing parse error. warnings Character vector advisory warnings potentially dangerous patterns (e.g. system(), .Internal()).  Empty none detected.  advisory — sandbox handles actual restriction.","code":""},{"path":"https://ian-flores.github.io/securer/reference/validate_code.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Validate R code before execution — validate_code","text":"Note: Pattern-based validation ADVISORY .  uses simple regex matching can produce false positives false negatives. OS-level sandbox (Seatbelt / bwrap) actual enforcement layer restricts filesystem, network, process access.  rely validation alone prevent dangerous operations.","code":""},{"path":"https://ian-flores.github.io/securer/reference/validate_code.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Validate R code before execution — validate_code","text":"","code":"# Valid code result <- validate_code(\"1 + 1\") result$valid #> [1] TRUE # TRUE  # Syntax error result <- validate_code(\"if (TRUE {\") result$valid #> [1] FALSE # FALSE result$error #> [1] \"<text>:1:10: unexpected '{'\\n1: if (TRUE {\\n             ^\"  # Dangerous pattern warning result <- validate_code(\"system('ls')\") result$warnings #> [1] \"Code contains call to `system()` which may be restricted by the sandbox\""},{"path":"https://ian-flores.github.io/securer/reference/validate_limits.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate a limits list — validate_limits","title":"Validate a limits list — validate_limits","text":"Checks limit names recognized values positive numbers.","code":""},{"path":"https://ian-flores.github.io/securer/reference/validate_limits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate a limits list — validate_limits","text":"","code":"validate_limits(limits)"},{"path":"https://ian-flores.github.io/securer/reference/validate_limits.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate a limits list — validate_limits","text":"limits named list resource limits.","code":""},{"path":"https://ian-flores.github.io/securer/reference/validate_limits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate a limits list — validate_limits","text":"Invisible NULL; raises error invalid input.","code":""},{"path":"https://ian-flores.github.io/securer/reference/validate_tools.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate a list of tools — validate_tools","title":"Validate a list of tools — validate_tools","text":"Accepts either named list bare functions (legacy format increment 1) list securer_tool() objects. Returns named list two components: fns (tool functions keyed name) arg_meta (expected argument names keyed tool name).","code":""},{"path":"https://ian-flores.github.io/securer/reference/validate_tools.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate a list of tools — validate_tools","text":"","code":"validate_tools(tools)"},{"path":"https://ian-flores.github.io/securer/reference/validate_tools.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate a list of tools — validate_tools","text":"tools List securer_tool objects named list functions","code":""},{"path":"https://ian-flores.github.io/securer/reference/validate_tools.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate a list of tools — validate_tools","text":"list fns (named list functions) arg_meta (named list character vectors expected arg names, NULL legacy tools without metadata)","code":""},{"path":"https://ian-flores.github.io/securer/reference/windows_supported_limits.html","id":null,"dir":"Reference","previous_headings":"","what":"Windows-supported resource limit names — windows_supported_limits","title":"Windows-supported resource limit names — windows_supported_limits","text":"Returns limit names can enforced Windows via Job Objects.","code":""},{"path":"https://ian-flores.github.io/securer/reference/windows_supported_limits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Windows-supported resource limit names — windows_supported_limits","text":"","code":"windows_supported_limits()"},{"path":"https://ian-flores.github.io/securer/reference/windows_supported_limits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Windows-supported resource limit names — windows_supported_limits","text":"character vector supported limit names.","code":""}]
